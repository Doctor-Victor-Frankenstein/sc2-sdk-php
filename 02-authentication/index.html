



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.7.0">
    
    
      
        <title>Authentication - SteemConnect SDK for PHP</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.78aab2dc.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#authentication" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="SteemConnect SDK for PHP" class="md-header-nav__button md-logo">
          
            <img src="../img/sc-logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                SteemConnect SDK for PHP
              </span>
              <span class="md-header-nav__topic">
                Authentication
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/hernandev/sc2-sdk-php/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      hernandev/sc2-sdk-php
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../img/sc-logo.svg" width="48" height="48">
      
    </span>
    SteemConnect SDK for PHP
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/hernandev/sc2-sdk-php/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      hernandev/sc2-sdk-php
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../01-configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Authentication
      </label>
    
    <a href="./" title="Authentication" class="md-nav__link md-nav__link--active">
      Authentication
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-authentication" title="Before Authentication." class="md-nav__link">
    Before Authentication.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-oauth-flow" title="The OAuth Flow." class="md-nav__link">
    The OAuth Flow.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-to-steemconnect" title="Redirecting To SteemConnect." class="md-nav__link">
    Redirecting To SteemConnect.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-the-return" title="Handling the Return." class="md-nav__link">
    Handling the Return.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-and-using-access-tokens" title="Storing and Using Access Tokens." class="md-nav__link">
    Storing and Using Access Tokens.
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serialization-for-storage" title="Serialization for Storage:" class="md-nav__link">
    Serialization for Storage:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing-stored-tokens" title="Parsing Stored Tokens." class="md-nav__link">
    Parsing Stored Tokens.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-tokens" title="Using Tokens." class="md-nav__link">
    Using Tokens.
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03-operations/" title="Operations" class="md-nav__link">
      Operations
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-authentication" title="Before Authentication." class="md-nav__link">
    Before Authentication.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-oauth-flow" title="The OAuth Flow." class="md-nav__link">
    The OAuth Flow.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirecting-to-steemconnect" title="Redirecting To SteemConnect." class="md-nav__link">
    Redirecting To SteemConnect.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handling-the-return" title="Handling the Return." class="md-nav__link">
    Handling the Return.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storing-and-using-access-tokens" title="Storing and Using Access Tokens." class="md-nav__link">
    Storing and Using Access Tokens.
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serialization-for-storage" title="Serialization for Storage:" class="md-nav__link">
    Serialization for Storage:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing-stored-tokens" title="Parsing Stored Tokens." class="md-nav__link">
    Parsing Stored Tokens.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-tokens" title="Using Tokens." class="md-nav__link">
    Using Tokens.
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/hernandev/sc2-sdk-php/edit/master/docs/02-authentication.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h1>
<p>This library wraps all authentication functionality built on <strong><a href="https://github.com/hernandev/oauth2-sc2">oauth2-sc2</a></strong>, if you are using the SDK, there's no need for separate authentication configuration, since all logic is wrapped on the SDK.</p>
<h2 id="before-authentication">Before Authentication.<a class="headerlink" href="#before-authentication" title="Permanent link">&para;</a></h2>
<p>Before we head into the actual authentication, we must have a SDK client instance.</p>
<p>The class that handle all SDK features is <strong><code>SteemConnect\Client\Client</code></strong> and for the examples on this section, we will create one instance and name the variable <strong><code>$sdk</code></strong>:</p>
<p>Also, we are assuming, you have the <strong><code>$config</code></strong> variable from the configuration section available.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="c1">// alias the client.</span>
<span class="k">use</span> <span class="nx">SteemConnect\Client\Client</span><span class="p">;</span>

<span class="c1">// create a sdk client instance, using the</span>
<span class="c1">// config instance we previously created.</span>
<span class="nv">$sdk</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="nv">$config</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h2 id="the-oauth-flow">The OAuth Flow.<a class="headerlink" href="#the-oauth-flow" title="Permanent link">&para;</a></h2>
<p>Those those who are not so familiar with OAuth, the basic flow is this:</p>
<ol>
<li>Application redirects the user the the OAuth Provider, in this case, SteemConnect.</li>
<li>The user, grants, on the SteemConnect page, the permissions so your application can act on the user behalf.</li>
<li>After the authorization, the provider, in this case SteemConnect, will redirect the user back to your application, with a temporary code that will be exchanged with an access token.</li>
</ol>
<p>All of those steps are wrapped by the SDK.</p>
<p>This means, that you only need to do two SDK calls in order to authenticate and get authorization from users.</p>
<h2 id="redirecting-to-steemconnect">Redirecting To SteemConnect.<a class="headerlink" href="#redirecting-to-steemconnect" title="Permanent link">&para;</a></h2>
<p>When the users access your application, you will need to do a redirect to SteemConnect.</p>
<p>Now, using the SDK we can build the URL used to redirect the users to:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="c1">// get the authorization URL.</span>
<span class="nv">$authorizationURL</span> <span class="o">=</span> <span class="nv">$sdk</span><span class="o">-&gt;</span><span class="na">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getAuthorizationUrl</span><span class="p">();</span>
</pre></div>
</td></tr></table>

<p>Now, you can actually redirect the user to that URL. Be free to use any method you want.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>


<span class="c1">// using pure PHP:</span>
<span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Location: </span><span class="si">{</span><span class="nv">$authorizationURL</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">);</span>


<span class="c1">// using Laravel inside a controller:</span>
<span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="nv">$authorizationURL</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<p>By doing that for the first time, your users will be faced with the following authorization page:</p>
<p><img alt="http://ipfs.io/ipfs/QmShgahjCzUbbdZPrG4rHGcJL8ugeR2XspfFwrDw9wy6zj" src="http://ipfs.io/ipfs/QmShgahjCzUbbdZPrG4rHGcJL8ugeR2XspfFwrDw9wy6zj" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice on this example, the application requesting permission is <a href="https://busy.org">Busy.org</a>. Both the logo and application name will change on your own applications, and can be customized through SteemConnect dashboard.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Also, the scopes required may change by your own requirements, be sure to read all and request only the ones you actually need. Avoid having more powers over your users accounts than you actually need.</p>
</div>
<h2 id="handling-the-return">Handling the Return.<a class="headerlink" href="#handling-the-return" title="Permanent link">&para;</a></h2>
<p>In some places referred to as <code>callback</code>, the return from an authorization flow is just the practice of exchanging the temporary grant code
with a real access token, that is required to operate your users accounts after the authorization.</p>
<p>The SDK also abstracts all that parsing, so you only need to do one call at callback phase.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>


<span class="c1">// exchanging the authorization code by a access token.</span>
<span class="nv">$token</span> <span class="o">=</span> <span class="nv">$sdk</span><span class="o">-&gt;</span><span class="na">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">parseReturn</span><span class="p">();</span>
</pre></div>
</td></tr></table>

<p>The token returned on the callback / return page is an instance of <strong><code>SteemConnect\Auth\Token</code></strong>, which we will discuss on the next section.</p>
<h2 id="storing-and-using-access-tokens">Storing and Using Access Tokens.<a class="headerlink" href="#storing-and-using-access-tokens" title="Permanent link">&para;</a></h2>
<p>Each access token is specific to a given user. Meaning when you need to the access token every time you need to broadcast an operation
to the Steem blockchain.</p>
<p>Since the tokens as an instance of <strong><code>SteemConnect\Auth\Token</code></strong>, it's easy to serialize and factory it's instance:</p>
<h3 id="serialization-for-storage">Serialization for Storage:<a class="headerlink" href="#serialization-for-storage" title="Permanent link">&para;</a></h3>
<p>When you have a <strong><code>Token</code></strong> instance, and you need to store it, you can transform the token into a JSON string by doing:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="c1">// create a json representation of the token for storage.</span>
<span class="nv">$tokenJson</span> <span class="o">=</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$token</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h3 id="parsing-stored-tokens">Parsing Stored Tokens.<a class="headerlink" href="#parsing-stored-tokens" title="Permanent link">&para;</a></h3>
<p>Now, on a late time, when a given user returns to your application, you can just factory the token instance back:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="k">use</span> <span class="nx">SteemConnect\Auth\Token</span><span class="p">;</span>

<span class="c1">// the fromJsonString method will decode </span>
<span class="c1">// the token json string into a token instance.</span>
<span class="nv">$token</span> <span class="o">=</span> <span class="nx">Token</span><span class="o">::</span><span class="na">fromJsonString</span><span class="p">(</span><span class="nv">$tokenJson</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h2 id="using-tokens">Using Tokens.<a class="headerlink" href="#using-tokens" title="Permanent link">&para;</a></h2>
<p>Since all operations needs to be authenticated, the SDK requires a <code>Token</code> instance to work.</p>
<p>To configure the access token on the SDK, all you need to do is:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="c1">// ...</span>

<span class="c1">// set the token instance on the SDK, </span>
<span class="c1">// so operations can be authenticated.</span>
<span class="nv">$sdk</span><span class="o">-&gt;</span><span class="na">setToken</span><span class="p">(</span><span class="nv">$token</span><span class="p">);</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../01-configuration/" title="Configuration" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Configuration
              </span>
            </div>
          </a>
        
        
          <a href="../03-operations/" title="Operations" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Operations
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/hernandev" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/_hernandev" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/hernandev" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.189d7058.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>